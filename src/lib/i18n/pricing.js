export const EN = {
  hero: { 
    title: 'Pricing', 
    sub: 'Choose your plan and billing country.' 
  },
  steps: {
    choosePlan: '1) Choose your plan',
    chooseCountry: '2) Choose your billing country',
    summary: '3) Summary'
  },
  oneTime: {
    title: 'One-time Reading',
    withChat: 'With 10-min chat',
    noChat: 'Reading only',
    toggle: 'Include 10-min chat'
  },
  subscription: {
    title: 'Unlimited Readings',
    includes: 'Includes {count} readings per month',
    monthly: 'Monthly',
    annual: 'Annual',
    billedMonthly: 'Billed monthly',
    billedAnnually: 'Billed annually'
  },
  countrySearch: 'Search country…',
  empty: 'No countries match "{query}".',
  footnote: 'Prices include VAT where applicable. Your card\'s billing country must match your selection.',
  summary: {
    language: 'Language',
    country: 'Country',
    price: 'Price'
  },
  actions: {
    selectCountryFirst: 'Select country to see price',
    continue: 'Continue to checkout'
  }
};

export const SR = {
  hero: { 
    title: 'Cenovnik', 
    sub: 'Izaberite plan i zemlju naplate.' 
  },
  steps: {
    choosePlan: '1) Izaberite plan',
    chooseCountry: '2) Izaberite zemlju naplate',
    summary: '3) Pregled'
  },
  oneTime: {
    title: 'Jednokratno čitanje',
    withChat: 'Sa 10-min razgovorom',
    noChat: 'Samo čitanje',
    toggle: 'Uključi 10-min razgovor'
  },
  subscription: {
    title: 'Neograničena čitanja',
    includes: 'Uključuje {count} čitanja mesečno',
    monthly: 'Mesečno',
    annual: 'Godišnje',
    billedMonthly: 'Naplaćuje se mesečno',
    billedAnnually: 'Naplaćuje se godišnje'
  },
  countrySearch: 'Pretraži zemlju…',
  empty: 'Nema zemalja koje odgovaraju "{query}".',
  footnote: 'Cene uključuju PDV gde je primenljivo. Zemlja vaše kartice mora da odgovara vašem izboru.',
  summary: {
    language: 'Jezik',
    country: 'Zemlja',
    price: 'Cena'
  },
  actions: {
    selectCountryFirst: 'Izaberite zemlju da vidite cenu',
    continue: 'Nastavi na plaćanje'
  }
};

export const RU = {
  hero: { 
    title: 'Цены', 
    sub: 'Выберите план и страну для выставления счета.' 
  },
  steps: {
    choosePlan: '1) Выберите план',
    chooseCountry: '2) Выберите страну для выставления счета',
    summary: '3) Сводка'
  },
  oneTime: {
    title: 'Разовая консультация',
    withChat: 'С 10-минутным разговором',
    noChat: 'Только чтение',
    toggle: 'Включить 10-минутный разговор'
  },
  subscription: {
    title: 'Неограниченные консультации',
    includes: 'Включает {count} консультаций в месяц',
    monthly: 'Ежемесячно',
    annual: 'Ежегодно',
    billedMonthly: 'Списание ежемесячно',
    billedAnnually: 'Списание ежегодно'
  },
  countrySearch: 'Поиск страны…',
  empty: 'Нет стран, соответствующих "{query}".',
  footnote: 'Цены включают НДС где применимо. Страна вашей карты должна соответствовать вашему выбору.',
  summary: {
    language: 'Язык',
    country: 'Страна',
    price: 'Цена'
  },
  actions: {
    selectCountryFirst: 'Выберите страну, чтобы увидеть цену',
    continue: 'Перейти к оплате'
  }
};

export const TR = {
  hero: { 
    title: 'Fiyatlandırma', 
    sub: 'Planınızı ve fatura ülkenizi seçin.' 
  },
  steps: {
    choosePlan: '1) Planınızı seçin',
    chooseCountry: '2) Fatura ülkenizi seçin',
    summary: '3) Özet'
  },
  oneTime: {
    title: 'Tek seferlik okuma',
    withChat: '10 dakikalık sohbet ile',
    noChat: 'Sadece okuma',
    toggle: '10 dakikalık sohbet ekle'
  },
  subscription: {
    title: 'Sınırsız okumalar',
    includes: 'Ayda {count} okuma içerir',
    monthly: 'Aylık',
    annual: 'Yıllık',
    billedMonthly: 'Aylık faturalandırılır',
    billedAnnually: 'Yıllık faturalandırılır'
  },
  countrySearch: 'Ülke ara…',
  empty: '"{query}" ile eşleşen ülke yok.',
  footnote: 'Fiyatlar uygulanabilir yerlerde KDV dahildir. Kartınızın fatura ülkesi seçiminizle eşleşmelidir.',
  summary: {
    language: 'Dil',
    country: 'Ülke',
    price: 'Fiyat'
  },
  actions: {
    selectCountryFirst: 'Fiyatı görmek için ülke seçin',
    continue: 'Ödemeye devam et'
  }
};

export const PL = {
  hero: { 
    title: 'Cennik', 
    sub: 'Wybierz plan i kraj rozliczeniowy.' 
  },
  steps: {
    choosePlan: '1) Wybierz plan',
    chooseCountry: '2) Wybierz kraj rozliczeniowy',
    summary: '3) Podsumowanie'
  },
  oneTime: {
    title: 'Jednorazowe czytanie',
    withChat: 'Z 10-minutową rozmową',
    noChat: 'Tylko czytanie',
    toggle: 'Dodaj 10-minutową rozmowę'
  },
  subscription: {
    title: 'Nieograniczone czytania',
    includes: 'Zawiera {count} czytań miesięcznie',
    monthly: 'Miesięcznie',
    annual: 'Rocznie',
    billedMonthly: 'Rozliczane miesięcznie',
    billedAnnually: 'Rozliczane rocznie'
  },
  countrySearch: 'Szukaj kraju…',
  empty: 'Brak krajów pasujących do "{query}".',
  footnote: 'Ceny zawierają VAT gdzie ma zastosowanie. Kraj Twojej karty musi odpowiadać Twojemu wyborowi.',
  summary: {
    language: 'Język',
    country: 'Kraj',
    price: 'Cena'
  },
  actions: {
    selectCountryFirst: 'Wybierz kraj, aby zobaczyć cenę',
    continue: 'Przejdź do płatności'
  }
};

export const IT = {
  hero: { 
    title: 'Prezzi', 
    sub: 'Scegli il tuo piano e il paese di fatturazione.' 
  },
  steps: {
    choosePlan: '1) Scegli il tuo piano',
    chooseCountry: '2) Scegli il paese di fatturazione',
    summary: '3) Riepilogo'
  },
  oneTime: {
    title: 'Lettura singola',
    withChat: 'Con chat di 10 minuti',
    noChat: 'Solo lettura',
    toggle: 'Includi chat di 10 minuti'
  },
  subscription: {
    title: 'Letture illimitate',
    includes: 'Include {count} letture al mese',
    monthly: 'Mensile',
    annual: 'Annuale',
    billedMonthly: 'Fatturato mensilmente',
    billedAnnually: 'Fatturato annualmente'
  },
  countrySearch: 'Cerca paese…',
  empty: 'Nessun paese corrisponde a "{query}".',
  footnote: 'I prezzi includono l\'IVA dove applicabile. Il paese della tua carta deve corrispondere alla tua selezione.',
  summary: {
    language: 'Lingua',
    country: 'Paese',
    price: 'Prezzo'
  },
  actions: {
    selectCountryFirst: 'Seleziona paese per vedere il prezzo',
    continue: 'Continua al checkout'
  }
};

export function t(lang, key, ...args) {
  const L = (lang || 'EN').toUpperCase();
  const dict = { EN, SR, RU, TR, PL, IT }[L] || EN;
  
  const keys = key.split('.');
  let value = dict;
  for (const k of keys) {
    value = value?.[k];
  }
  
  if (typeof value === 'string' && args.length > 0) {
    return value.replace(/\{(\w+)\}/g, (match, placeholder) => {
      const index = ['count', 'query'].indexOf(placeholder);
      return index >= 0 ? args[index] : match;
    });
  }
  
  return value || key;
}

export function localeForLang(lang) {
  const L = (lang || 'EN').toUpperCase();
  if (L === 'SR' || L === 'RS') return 'sr-RS';
  if (L === 'HR') return 'hr-HR';
  if (L === 'RU') return 'ru-RU';
  if (L === 'IT') return 'it-IT';
  if (L === 'PL') return 'pl-PL';
  if (L === 'TR') return 'tr-TR';
  return 'en-GB';
}
